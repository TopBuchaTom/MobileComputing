
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <template id="personTemplate">
        <h1>
            <slot name="name">Standard-Name</slot> ist <slot name="age">Standard-Alter</slot> Jahre alt! 
        </h1>
    </template>
    <template id="simpleTemplate">
        <p>Content vor Slot-Inhalt</p>
        <slot></slot>
        <p>Content nach Slot-Inhalt</p>
    </template>
    <script type="text/javascript">
        class LabelWithInput extends HTMLElement {
            root;
            shadow;

            constructor() {
                super();

                this.shadow = this.attachShadow({ mode: "closed" });
                this.root = document.createElement('label');
            }

            connectedCallback() {
                this.render();
                this.shadow.appendChild(this.root);
            }

            render() {
                this.root.innerHTML = `${this.getAttribute("label")}: <input value="${this.getAttribute("value")}" />`;
            }
        }
        customElements.define('label-with-input', LabelWithInput);

        class PersonOutput extends HTMLElement {
            root;
            shadow;

            constructor() {
                super();

                this.shadow = this.attachShadow({ mode: "closed" });
                this.root = document.getElementById("personTemplate").content.cloneNode(true);
            }

            connectedCallback() {
                this.shadow.appendChild(this.root);
            }
        }
        customElements.define('person-output', PersonOutput);

        class SimpleTemplate extends HTMLElement {
            root;
            shadow;

            constructor() {
                super();

                this.shadow = this.attachShadow({ mode: "closed" });
                this.root = document.getElementById("simpleTemplate").content.cloneNode(true);
            }

            connectedCallback() {
                this.shadow.appendChild(this.root);
            }
        }
        customElements.define('simple-output', SimpleTemplate);


        //             ,-> leitet von ... ab
        class DataRepeater extends HTMLElement {
            root;
            shadow;

            constructor() {
                super();

                this.shadow = this.attachShadow({ mode: "closed" });    //Schatten &
                this.root = document.createElement('div');              //           root werden angelegt (für später)
            }

            connectedCallback() {
                this.render();  //kann den Code von render() auch hier machen
                                //in den Frameworks gibt es meist render()-Methode, deshalb hat er es hier auch so gemacht
                this.shadow.appendChild(this.root);
            }

            render() {
                const data = this.getAttribute("data") || "";   //holt sich aus data-Attribut den Text raus, der übergeben wurde
                const count = parseInt(this.getAttribute("count")); //Wert von count-Attribut auslesen & in Ganzzahl umwandeln
                //oder:
                //const count = +this.getAttribute("count");
                this.root.innerHTML = data.repeat(count);   //der String, der in data steht, soll so oft wiederholt werden, wie es in count angegeben ist
                //                          '-> durch repeat()-Methode von String bekommt man neuen Gesamtstring, wo der jeweilige Ursprungsstring "Hello Word!" so oft hintereinander steht, wie es angegeben ist
                //                          '-> statt repeat() kann man auch Schleife nutzen: for-Schleife und bis count hochzählen; data += ...; data muss let sein (nicht const) = ineffizienter
            }

            //braucht man für Aufgabe 2:
            get count() { return parseInt(this.getAttribute("count") || 0); }
            set count(value) { this.setAttribute("count", value); }
        }
        customElements.define('data-repeater', DataRepeater);

        class DataRepeaterIncrementer extends HTMLElement {
            root;
            shadow;

            constructor() {
                super();

                this.shadow = this.attachShadow({ mode: "closed" });
                this.root = document.createElement('div');
            }

            connectedCallback() {
                this.render();
                this.shadow.appendChild(this.root);
            }

            render() {
                this.root.innerHTML = `<button onclick="let repeater=document.getElementById('${this.getAttribute("repeaterid")}'); repeater.count++;repeater.render();">Inkrementieren</button>`;
            }
        }
        customElements.define('data-repeater-incrementer', DataRepeaterIncrementer);
    </script>
    <!--alte Version: <style type="text/css" id="tts-styles">[data-tts-block-id].tts-active {background: rgba(206, 225, 255, 0.9) !important;} [data-tts-sentence-id].tts-active {background: rgba(0, 89, 191, 0.7) !important;}</style>-->
</head>
<body>   
    <label-with-input label="Hello" value="World"><!--alte Version: <template shadowrootmode="closed"><label>Hello: <input value="World"></label></template>--></label-with-input>
    <person-output>
        <!--alte Version:
        <template shadowrootmode="closed">
            <h1>
                <slot name="name">Standard-Name</slot> ist <slot name="age">Standard-Alter</slot> Jahre alt! 
            </h1>
        </template>
        -->
        <data slot="name">Max</data>
        <data slot="age">21</data>
    </person-output>
    <simple-output>
        <!--alte Version:
        <template shadowrootmode="closed">
            <p>Content vor Slot-Inhalt</p>
            <slot></slot>
            <p>Content nach Slot-Inhalt</p>
        </template>
        -->
        <p>Beliebiger <b>HTML-Content</b></p>
    </simple-output>
    <data-repeater id="repeater1" data="Hello World!" count="10"><!--alte Version: <template shadowrootmode="closed"><div>Hello World!Hello World!Hello World!Hello World!Hello World!Hello World!Hello World!Hello World!Hello World!Hello World!</div></template>--></data-repeater>
    <data-repeater-incrementer repeaterid="repeater1"><!--alte Version: <template shadowrootmode="closed"><div><button onclick="let repeater=document.getElementById(&#39;repeater1&#39;); repeater.count++;repeater.render();">Inkrementieren</button></div></template>--></data-repeater-incrementer>
</body>
</html>